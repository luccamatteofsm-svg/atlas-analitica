<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Carteira | Atlas Anal√≠tica</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <style>
    .toolbar{display:flex;gap:10px;flex-wrap:wrap;margin:10px 0}
    .toolbar button,.toolbar label{background:var(--card);border:1px solid var(--border);padding:8px 12px;border-radius:10px;cursor:pointer}
    .kpis{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:10px;margin:10px 0}
    .kpis .box{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:12px}
    .kpis h4{margin:0 0 6px 0;font-size:12px;color:var(--muted);text-transform:uppercase;letter-spacing:.4px}
    .kpis .val{font-size:20px;font-weight:700}
    table{width:100%;border-collapse:collapse}
    th,td{padding:10px;border-bottom:1px solid var(--border);white-space:nowrap}
    th{position:sticky;top:0;background:var(--card);text-align:left}
    tr:hover td{background:var(--hover)}
    .num{text-align:right}
    .gain{color:#16a34a}.loss{color:#dc2626}
    .wrap{display:grid;gap:12px;grid-template-columns:1fr;align-items:start}
    @media(min-width:1100px){.wrap{grid-template-columns:2fr 1fr}}
    .card{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:12px}
    dialog{border:none;border-radius:14px;padding:0;max-width:460px;width:96%}
    .modal{padding:16px;background:var(--card);border:1px solid var(--border);border-radius:14px}
    .modal h3{margin:0 0 12px 0}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    .grid label{font-size:12px;color:var(--muted)}
    .grid input,.grid select{width:100%;padding:10px;border-radius:10px;border:1px solid var(--border);background:var(--bg);color:var(--text)}
    .modal .actions{display:flex;gap:8px;justify-content:flex-end;margin-top:12px}
    .pill{padding:2px 8px;border-radius:10px;background:var(--hover);font-size:12px}
    .hidden{display:none}
  </style>
</head>
<body>
  <!-- Cabe√ßalho padr√£o do site -->
  <header class="navbar">
    <div class="brand">
      <a href="index.html" class="brand-link">
        <img src="img/logo.png" alt="Atlas Anal√≠tica" class="logo">
        <span>Atlas Anal√≠tica</span>
      </a>
    </div>
    <nav class="nav">
      <ul class="nav-list">
        <li><a href="index.html">Home</a></li>
        <li class="has-dd">
          <a href="ranking.html">Rankings</a>
          <ul class="dd">
            <li><a href="ranking.html">Geral</a></li>
            <li><a href="ranking-roic.html">ROIC</a></li>
            <li><a href="ranking-dy.html">Dividend Yield</a></li>
            <li><a href="ranking-ev-ebit.html">EV/EBIT</a></li>
          </ul>
        </li>
        <li class="has-dd">
          <a href="acoes.html">A√ß√µes</a>
          <ul class="dd">
            <li><a href="acoes.html">Todas as A√ß√µes</a></li>
            <li><a href="simulador.html">Simulador</a></li>
            <li><a href="previsao-dividendos.html">Previs√£o de Dividendos</a></li>
            <li><a href="agenda-dividendos.html">Agenda de Dividendos</a></li>
            <li><a href="comparador.html">Comparador</a></li>
            <li><a href="busca-avancada.html">Busca Avan√ßada</a></li>
          </ul>
        </li>
        <li class="has-dd">
          <a href="fiis.html">FIIs</a>
          <ul class="dd">
            <li><a href="fiis.html">Todos os Fundos imobili√°rios</a></li>
            <li><a href="fiagros.html">Todos os FIAGROs</a></li>
            <li><a href="agenda-fiis.html">Agenda de Dividendos</a></li>
            <li><a href="simulador-fiis.html">Simulador</a></li>
            <li><a href="busca-avancada-fiis.html">Busca Avan√ßada</a></li>
            <li><a href="comparador-fiis.html">Comparador</a></li>
          </ul>
        </li>
        <li class="has-dd">
          <a href="internacional.html">Internacional</a>
          <ul class="dd">
            <li><a href="todas-acoes-int.html">Todas as A√ß√µes</a></li>
            <li><a href="comparador-int.html">Comparador</a></li>
            <li><a href="reits.html">REITs</a></li>
            <li><a href="busca-avancada-int.html">Busca Avan√ßada</a></li>
          </ul>
        </li>
        <li class="has-dd">
          <a href="outros.html">Outros</a>
          <ul class="dd">
            <li><a href="renda-fixa.html">Renda Fixa</a></li>
            <li><a href="agenda-resultados.html">Agenda de Resultados</a></li>
            <li><a href="indices.html">√çndices</a></li>
            <li class="sep">Calculadoras</li>
            <li><a href="calculadoras/juros-simples.html">Juros Simples</a></li>
            <li><a href="calculadoras/juros-compostos.html">Juros Compostos</a></li>
            <li><a href="calculadoras/poupanca-vs-selic.html">Poupan√ßa vs Selic</a></li>
            <li><a href="calculadoras/renda-fixa.html">Comparador de Renda Fixa</a></li>
            <li><a href="calculadoras/alugar-vs-financiar.html">Alugar vs Financiar</a></li>
            <li><a href="calculadoras/primeiro-milhao.html">Primeiro Milh√£o</a></li>
          </ul>
        </li>
        <li><a href="carteira.html" class="active">Carteira</a></li>
      </ul>
      <button id="themeToggle" class="theme-toggle" aria-pressed="false" title="Alternar tema">üåô</button>
      <button class="hamb" id="hamb" aria-label="Menu">‚ò∞</button>
    </nav>
  </header>

  <main class="content">
    <h1>Carteira</h1>

    <div class="toolbar">
      <button id="btnAdd">Adicionar ativo</button>
      <button id="btnImport">Importar</button>
      <button id="btnExport">Exportar</button>
      <label class="pill"><input type="checkbox" id="autoPrice" checked> Atualizar pre√ßos automaticamente</label>
      <span class="pill" id="lastSync">‚Äî</span>
      <input id="q" placeholder="Buscar ticker/empresa‚Ä¶" style="margin-left:auto;padding:8px 12px;border-radius:10px;border:1px solid var(--border);background:var(--bg);color:var(--text)">
    </div>

    <section class="kpis">
      <div class="box"><h4>Patrim√¥nio</h4><div class="val" id="kPatrimonio">‚Äî</div></div>
      <div class="box"><h4>Lucro/Preju√≠zo</h4><div class="val" id="kPL">‚Äî</div></div>
      <div class="box"><h4>Retorno (%)</h4><div class="val" id="kRet">‚Äî</div></div>
      <div class="box"><h4>Dividend Yield Est.</h4><div class="val" id="kDY">‚Äî</div></div>
    </section>

    <div class="wrap">
      <div class="card">
        <div style="overflow:auto;max-height:70vh;">
          <table id="tbl">
            <thead>
              <tr>
                <th>Ticker</th><th>Empresa</th><th>Setor</th>
                <th class="num">Qtd</th><th class="num">PM</th><th class="num">Custo</th>
                <th class="num">Pre√ßo</th><th class="num">Valor</th>
                <th class="num">P/L</th><th class="num">% Cartera</th>
                <th>A√ß√µes</th>
              </tr>
            </thead>
            <tbody></tbody>
            <tfoot>
              <tr>
                <th colspan="5">Totais</th>
                <th class="num" id="tCusto">‚Äî</th>
                <th></th>
                <th class="num" id="tValor">‚Äî</th>
                <th class="num" id="tPL">‚Äî</th>
                <th class="num" id="tPct">100%</th>
                <th></th>
              </tr>
            </tfoot>
          </table>
        </div>
      </div>

      <div class="card">
        <h3>Aloca√ß√£o</h3>
        <canvas id="pieAtivos" height="260"></canvas>
        <div style="height:16px"></div>
        <canvas id="pieSetores" height="260"></canvas>
      </div>
    </div>
  </main>

  <!-- Modal -->
  <dialog id="dlg">
    <form method="dialog" class="modal">
      <h3 id="dlgTitle">Adicionar ativo</h3>
      <div class="grid">
        <div>
          <label>Ticker</label>
          <input id="fTicker" placeholder="PETR4" required />
        </div>
        <div>
          <label>Empresa (opcional)</label>
          <input id="fEmpresa" placeholder="Petrobras" />
        </div>
        <div>
          <label>Setor (opcional)</label>
          <input id="fSetor" placeholder="Petr√≥leo, G√°s e Combust√≠veis" />
        </div>
        <div>
          <label>Quantidade</label>
          <input id="fQtd" type="number" step="0.0001" min="0" value="0" required />
        </div>
        <div>
          <label>Pre√ßo m√©dio</label>
          <input id="fPM" type="number" step="0.0001" min="0" value="0" required />
        </div>
      </div>
      <div class="actions">
        <button value="cancel">Cancelar</button>
        <button id="btnSave" value="default">Salvar</button>
      </div>
    </form>
  </dialog>

  <script src="carteira.js" defer></script>
  <script src="script.js" defer></script>
<script src="/script.js?v=3" defer></script>
</body>
</html>
